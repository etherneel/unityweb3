import{bw as Sn,bn as dt,bx as Ht,bt as Nn,bo as ur}from"./index-ce020a9a.js";var ye=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(ye||{}),tt=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(tt||{}),_t=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(_t||{}),W=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="mc_get_wallet_info",e.ShowUI="mc_wallet",e.NFTPurchase="magic_nft_purchase",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.UpdatePhoneNumber="magic_auth_update_phone_number",e.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e))(W||{}),Oe=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(Oe||{}),Ve=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ve||{}),Ln=(e=>(e.Harmony="HARMONY",e))(Ln||{}),Tn=Object.create,rt=Object.defineProperty,Mn=Object.defineProperties,$n=Object.getOwnPropertyDescriptor,Cn=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertyNames,Wt=Object.getOwnPropertySymbols,Pn=Object.getPrototypeOf,lr=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,qt=(e,t,r)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fr=(e,t)=>{for(var r in t||(t={}))lr.call(t,r)&&qt(e,r,t[r]);if(Wt)for(var r of Wt(t))Un.call(t,r)&&qt(e,r,t[r]);return e},xn=(e,t)=>Mn(e,Cn(t)),jn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),kn=(e,t)=>{for(var r in t)rt(e,r,{get:t[r],enumerable:!0})},Fn=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Dn(t))!lr.call(e,a)&&a!==r&&rt(e,a,{get:()=>t[a],enumerable:!(o=$n(t,a))||o.enumerable});return e},Bn=(e,t,r)=>(r=e!=null?Tn(Pn(e)):{},Fn(t||!e||!e.__esModule?rt(r,"default",{value:e,enumerable:!0}):r,e)),de=(e,t,r)=>new Promise((o,a)=>{var c=v=>{try{h(r.next(v))}catch(m){a(m)}},E=v=>{try{h(r.throw(v))}catch(m){a(m)}},h=v=>v.done?o(v.value):Promise.resolve(v.value).then(c,E);h((r=r.apply(e,t)).next())}),Gn=jn((e,t)=>{var r=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function c(m,g,p){this.fn=m,this.context=g,this.once=p||!1}function E(m,g,p,S,L){if(typeof p!="function")throw new TypeError("The listener must be a function");var D=new c(p,S||m,L),M=o?o+g:g;return m._events[M]?m._events[M].fn?m._events[M]=[m._events[M],D]:m._events[M].push(D):(m._events[M]=D,m._eventsCount++),m}function h(m,g){--m._eventsCount===0?m._events=new a:delete m._events[g]}function v(){this._events=new a,this._eventsCount=0}v.prototype.eventNames=function(){var m=[],g,p;if(this._eventsCount===0)return m;for(p in g=this._events)r.call(g,p)&&m.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},v.prototype.listeners=function(m){var g=o?o+m:m,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var S=0,L=p.length,D=new Array(L);S<L;S++)D[S]=p[S].fn;return D},v.prototype.listenerCount=function(m){var g=o?o+m:m,p=this._events[g];return p?p.fn?1:p.length:0},v.prototype.emit=function(m,g,p,S,L,D){var M=o?o+m:m;if(!this._events[M])return!1;var d=this._events[M],N=arguments.length,C,$;if(d.fn){switch(d.once&&this.removeListener(m,d.fn,void 0,!0),N){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,g),!0;case 3:return d.fn.call(d.context,g,p),!0;case 4:return d.fn.call(d.context,g,p,S),!0;case 5:return d.fn.call(d.context,g,p,S,L),!0;case 6:return d.fn.call(d.context,g,p,S,L,D),!0}for($=1,C=new Array(N-1);$<N;$++)C[$-1]=arguments[$];d.fn.apply(d.context,C)}else{var B=d.length,b;for($=0;$<B;$++)switch(d[$].once&&this.removeListener(m,d[$].fn,void 0,!0),N){case 1:d[$].fn.call(d[$].context);break;case 2:d[$].fn.call(d[$].context,g);break;case 3:d[$].fn.call(d[$].context,g,p);break;case 4:d[$].fn.call(d[$].context,g,p,S);break;default:if(!C)for(b=1,C=new Array(N-1);b<N;b++)C[b-1]=arguments[b];d[$].fn.apply(d[$].context,C)}}return!0},v.prototype.on=function(m,g,p){return E(this,m,g,p,!1)},v.prototype.once=function(m,g,p){return E(this,m,g,p,!0)},v.prototype.removeListener=function(m,g,p,S){var L=o?o+m:m;if(!this._events[L])return this;if(!g)return h(this,L),this;var D=this._events[L];if(D.fn)D.fn===g&&(!S||D.once)&&(!p||D.context===p)&&h(this,L);else{for(var M=0,d=[],N=D.length;M<N;M++)(D[M].fn!==g||S&&!D[M].once||p&&D[M].context!==p)&&d.push(D[M]);d.length?this._events[L]=d.length===1?d[0]:d:h(this,L)}return this},v.prototype.removeAllListeners=function(m){var g;return m?(g=o?o+m:m,this._events[g]&&h(this,g)):(this._events=new a,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=o,v.EventEmitter=v,typeof t<"u"&&(t.exports=v)});function Hn(e){let t={exports:{}};return e(t,t.exports),t.exports}var Wn=Number.MAX_SAFE_INTEGER||9007199254740991,gt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Wn,MAX_SAFE_COMPONENT_LENGTH:16},qn=typeof process=="object"&&{MANPATH:"/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",rvm_bin_path:"/Users/etherneel/.rvm/bin",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/etherneel/Downloads/newww",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/d3/d3r6h_s12bn_wv8p4ftdjtb00000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.87.2",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/etherneel/Downloads/newww",LC_ALL:"en_US.UTF-8",USER:"etherneel",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",rvm_path:"/Users/etherneel/.rvm",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.7UhCgAKtRL/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",rvm_prefix:"/Users/etherneel",PATH:"/Users/etherneel/Downloads/newww/node_modules/.bin:/Users/etherneel/Downloads/node_modules/.bin:/Users/etherneel/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/etherneel/Downloads/flutter/bin:/Users/etherneel/.rvm/bin",npm_package_json:"/Users/etherneel/Downloads/newww/package.json",_:"/Users/etherneel/Downloads/newww/node_modules/.bin/vite",npm_config_userconfig:"/Users/etherneel/.npmrc",npm_config_init_module:"/Users/etherneel/.npm-init.js",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/etherneel/Downloads/newww",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",npm_config_npm_version:"10.2.4",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"application.com.microsoft.VSCode.117726150.117726156",rvm_version:"1.29.12 (latest)",SHLVL:"1",HOME:"/Users/etherneel",LANGUAGE:"en_US.UTF-8",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/etherneel/.npm",LOGNAME:"etherneel",npm_lifecycle_script:"vite build",npm_config_user_agent:"npm/10.2.4 node/v21.3.0 darwin arm64 workspaces/false",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}&&{MANPATH:"/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",rvm_bin_path:"/Users/etherneel/.rvm/bin",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/etherneel/Downloads/newww",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/d3/d3r6h_s12bn_wv8p4ftdjtb00000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.87.2",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/etherneel/Downloads/newww",LC_ALL:"en_US.UTF-8",USER:"etherneel",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",rvm_path:"/Users/etherneel/.rvm",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.7UhCgAKtRL/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",rvm_prefix:"/Users/etherneel",PATH:"/Users/etherneel/Downloads/newww/node_modules/.bin:/Users/etherneel/Downloads/node_modules/.bin:/Users/etherneel/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/etherneel/Downloads/flutter/bin:/Users/etherneel/.rvm/bin",npm_package_json:"/Users/etherneel/Downloads/newww/package.json",_:"/Users/etherneel/Downloads/newww/node_modules/.bin/vite",npm_config_userconfig:"/Users/etherneel/.npmrc",npm_config_init_module:"/Users/etherneel/.npm-init.js",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/etherneel/Downloads/newww",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",npm_config_npm_version:"10.2.4",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"application.com.microsoft.VSCode.117726150.117726156",rvm_version:"1.29.12 (latest)",SHLVL:"1",HOME:"/Users/etherneel",LANGUAGE:"en_US.UTF-8",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/etherneel/.npm",LOGNAME:"etherneel",npm_lifecycle_script:"vite build",npm_config_user_agent:"npm/10.2.4 node/v21.3.0 darwin arm64 workspaces/false",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}.NODE_DEBUG&&/\bsemver\b/i.test({MANPATH:"/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",rvm_bin_path:"/Users/etherneel/.rvm/bin",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/etherneel/Downloads/newww",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/d3/d3r6h_s12bn_wv8p4ftdjtb00000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.87.2",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/etherneel/Downloads/newww",LC_ALL:"en_US.UTF-8",USER:"etherneel",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",rvm_path:"/Users/etherneel/.rvm",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.7UhCgAKtRL/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",rvm_prefix:"/Users/etherneel",PATH:"/Users/etherneel/Downloads/newww/node_modules/.bin:/Users/etherneel/Downloads/node_modules/.bin:/Users/etherneel/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/etherneel/Downloads/flutter/bin:/Users/etherneel/.rvm/bin",npm_package_json:"/Users/etherneel/Downloads/newww/package.json",_:"/Users/etherneel/Downloads/newww/node_modules/.bin/vite",npm_config_userconfig:"/Users/etherneel/.npmrc",npm_config_init_module:"/Users/etherneel/.npm-init.js",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/etherneel/Downloads/newww",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",npm_config_npm_version:"10.2.4",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"application.com.microsoft.VSCode.117726150.117726156",rvm_version:"1.29.12 (latest)",SHLVL:"1",HOME:"/Users/etherneel",LANGUAGE:"en_US.UTF-8",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/etherneel/.npm",LOGNAME:"etherneel",npm_lifecycle_script:"vite build",npm_config_user_agent:"npm/10.2.4 node/v21.3.0 darwin arm64 workspaces/false",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},X=qn,Ue=Hn(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=gt,o=(t=e.exports={}).re=[],a=t.src=[],c=t.t={},E=0,h=(v,m,g)=>{let p=E++;X(p,m),c[v]=p,a[p]=m,o[p]=new RegExp(m,g?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","[0-9]+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),h("MAINVERSION",`(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${a[c.NUMERICIDENTIFIER]}|${a[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${a[c.NUMERICIDENTIFIERLOOSE]}|${a[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${a[c.PRERELEASEIDENTIFIER]}(?:\\.${a[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${a[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER","[0-9A-Za-z-]+"),h("BUILD",`(?:\\+(${a[c.BUILDIDENTIFIER]}(?:\\.${a[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${a[c.MAINVERSION]}${a[c.PRERELEASE]}?${a[c.BUILD]}?`),h("FULL",`^${a[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${a[c.MAINVERSIONLOOSE]}${a[c.PRERELEASELOOSE]}?${a[c.BUILD]}?`),h("LOOSE",`^${a[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${a[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${a[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:${a[c.PRERELEASE]})?${a[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:${a[c.PRERELEASELOOSE]})?${a[c.BUILD]}?)?)?`),h("XRANGE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),h("COERCERTL",a[c.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${a[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${a[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${a[c.LONECARET]}${a[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${a[c.LONECARET]}${a[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${a[c.GTLT]}\\s*(${a[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]}|${a[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${a[c.XRANGEPLAIN]})\\s+-\\s+(${a[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${a[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0.0.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),zt=/^[0-9]+$/,dr=(e,t)=>{let r=zt.test(e),o=zt.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1},zn=(e,t)=>dr(t,e),Xn={compareIdentifiers:dr,rcompareIdentifiers:zn},{MAX_LENGTH:Xt,MAX_SAFE_INTEGER:Fe}=gt,{re:Vt,t:Kt}=Ue,{compareIdentifiers:Me}=Xn,re=class{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof re){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Xt)throw new TypeError(`version is longer than ${Xt} characters`);X("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let o=t.trim().match(r.loose?Vt[Kt.LOOSE]:Vt[Kt.FULL]);if(!o)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>Fe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fe||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let c=+a;if(c>=0&&c<Fe)return c}return a}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(X("SemVer.compare",this.version,this.options,t),!(t instanceof re)){if(typeof t=="string"&&t===this.version)return 0;t=new re(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof re||(t=new re(t,this.options)),Me(this.major,t.major)||Me(this.minor,t.minor)||Me(this.patch,t.patch)}comparePre(t){if(t instanceof re||(t=new re(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let o=this.prerelease[r],a=t.prerelease[r];if(X("prerelease compare",r,o,a),o===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(o===void 0)return-1;if(o!==a)return Me(o,a)}while(++r)}compareBuild(t){t instanceof re||(t=new re(t,this.options));let r=0;do{let o=this.build[r],a=t.build[r];if(X("prerelease compare",r,o,a),o===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(o===void 0)return-1;if(o!==a)return Me(o,a)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);o===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}},Vn=(e,t,r)=>new re(e,r).compare(new re(t,r)),Ne=Vn,Kn=(e,t,r)=>Ne(e,t,r)===0,Yn=Kn,Jn=(e,t,r)=>Ne(e,t,r)!==0,Qn=Jn,Zn=(e,t,r)=>Ne(e,t,r)>0,eo=Zn,to=(e,t,r)=>Ne(e,t,r)>=0,ro=to,no=(e,t,r)=>Ne(e,t,r)<0,oo=no,io=(e,t,r)=>Ne(e,t,r)<=0,so=io,ao=(e,t,r,o)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Yn(e,r,o);case"!=":return Qn(e,r,o);case">":return eo(e,r,o);case">=":return ro(e,r,o);case"<":return oo(e,r,o);case"<=":return so(e,r,o);default:throw new TypeError(`Invalid operator: ${t}`)}},ht=ao,$e=Symbol("SemVer ANY"),De=class{static get ANY(){return $e}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof De){if(e.loose===!!t.loose)return e;e=e.value}X("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===$e?this.value="":this.value=this.operator+this.semver.version,X("comp",this)}parse(e){let t=this.options.loose?Yt[Jt.COMPARATORLOOSE]:Yt[Jt.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new re(r[2],this.options.loose):this.semver=$e}toString(){return this.value}test(e){if(X("Comparator.test",e,this.options.loose),this.semver===$e||e===$e)return!0;if(typeof e=="string")try{e=new re(e,this.options)}catch{return!1}return ht(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof De))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ae(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ae(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),o=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),a=this.semver.version===e.semver.version,c=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),E=ht(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),h=ht(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||o||a&&c||E||h}},{re:Yt,t:Jt}=Ue,Ae=class{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof Ae)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new Ae(t.raw,r);if(t instanceof De)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(o=>this.parseRange(o.trim())).filter(o=>o.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let o=r?se[ne.HYPHENRANGELOOSE]:se[ne.HYPHENRANGE];t=t.replace(o,bo(this.options.includePrerelease)),X("hyphen replace",t),t=t.replace(se[ne.COMPARATORTRIM],co),X("comparator trim",t,se[ne.COMPARATORTRIM]),t=(t=(t=t.replace(se[ne.TILDETRIM],uo)).replace(se[ne.CARETTRIM],lo)).split(/\s+/).join(" ");let a=r?se[ne.COMPARATORLOOSE]:se[ne.COMPARATOR];return t.split(" ").map(c=>fo(c,this.options)).join(" ").split(/\s+/).map(c=>Eo(c,this.options)).filter(this.options.loose?c=>!!c.match(a):()=>!0).map(c=>new De(c,this.options))}intersects(t,r){if(!(t instanceof Ae))throw new TypeError("a Range is required");return this.set.some(o=>Qt(o,r)&&t.set.some(a=>Qt(a,r)&&o.every(c=>a.every(E=>c.intersects(E,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new re(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(wo(this.set[r],t,this.options))return!0;return!1}},{re:se,t:ne,comparatorTrimReplace:co,tildeTrimReplace:uo,caretTrimReplace:lo}=Ue,Qt=(e,t)=>{let r=!0,o=e.slice(),a=o.pop();for(;r&&o.length;)r=o.every(c=>a.intersects(c,t)),a=o.pop();return r},fo=(e,t)=>(X("comp",e,t),e=mo(e,t),X("caret",e),e=ho(e,t),X("tildes",e),e=_o(e,t),X("xrange",e),e=yo(e,t),X("stars",e),e),ae=e=>!e||e.toLowerCase()==="x"||e==="*",ho=(e,t)=>e.trim().split(/\s+/).map(r=>po(r,t)).join(" "),po=(e,t)=>{let r=t.loose?se[ne.TILDELOOSE]:se[ne.TILDE];return e.replace(r,(o,a,c,E,h)=>{let v;return X("tilde",e,o,a,c,E,h),ae(a)?v="":ae(c)?v=`>=${a}.0.0 <${+a+1}.0.0-0`:ae(E)?v=`>=${a}.${c}.0 <${a}.${+c+1}.0-0`:h?(X("replaceTilde pr",h),v=`>=${a}.${c}.${E}-${h} <${a}.${+c+1}.0-0`):v=`>=${a}.${c}.${E} <${a}.${+c+1}.0-0`,X("tilde return",v),v})},mo=(e,t)=>e.trim().split(/\s+/).map(r=>vo(r,t)).join(" "),vo=(e,t)=>{X("caret",e,t);let r=t.loose?se[ne.CARETLOOSE]:se[ne.CARET],o=t.includePrerelease?"-0":"";return e.replace(r,(a,c,E,h,v)=>{let m;return X("caret",e,a,c,E,h,v),ae(c)?m="":ae(E)?m=`>=${c}.0.0${o} <${+c+1}.0.0-0`:ae(h)?m=c==="0"?`>=${c}.${E}.0${o} <${c}.${+E+1}.0-0`:`>=${c}.${E}.0${o} <${+c+1}.0.0-0`:v?(X("replaceCaret pr",v),m=c==="0"?E==="0"?`>=${c}.${E}.${h}-${v} <${c}.${E}.${+h+1}-0`:`>=${c}.${E}.${h}-${v} <${c}.${+E+1}.0-0`:`>=${c}.${E}.${h}-${v} <${+c+1}.0.0-0`):(X("no pr"),m=c==="0"?E==="0"?`>=${c}.${E}.${h}${o} <${c}.${E}.${+h+1}-0`:`>=${c}.${E}.${h}${o} <${c}.${+E+1}.0-0`:`>=${c}.${E}.${h} <${+c+1}.0.0-0`),X("caret return",m),m})},_o=(e,t)=>(X("replaceXRanges",e,t),e.split(/\s+/).map(r=>go(r,t)).join(" ")),go=(e,t)=>{e=e.trim();let r=t.loose?se[ne.XRANGELOOSE]:se[ne.XRANGE];return e.replace(r,(o,a,c,E,h,v)=>{X("xRange",e,o,a,c,E,h,v);let m=ae(c),g=m||ae(E),p=g||ae(h),S=p;return a==="="&&S&&(a=""),v=t.includePrerelease?"-0":"",m?o=a===">"||a==="<"?"<0.0.0-0":"*":a&&S?(g&&(E=0),h=0,a===">"?(a=">=",g?(c=+c+1,E=0,h=0):(E=+E+1,h=0)):a==="<="&&(a="<",g?c=+c+1:E=+E+1),a==="<"&&(v="-0"),o=`${a+c}.${E}.${h}${v}`):g?o=`>=${c}.0.0${v} <${+c+1}.0.0-0`:p&&(o=`>=${c}.${E}.0${v} <${c}.${+E+1}.0-0`),X("xRange return",o),o})},yo=(e,t)=>(X("replaceStars",e,t),e.trim().replace(se[ne.STAR],"")),Eo=(e,t)=>(X("replaceGTE0",e,t),e.trim().replace(se[t.includePrerelease?ne.GTE0PRE:ne.GTE0],"")),bo=e=>(t,r,o,a,c,E,h,v,m,g,p,S,L)=>`${r=ae(o)?"":ae(a)?`>=${o}.0.0${e?"-0":""}`:ae(c)?`>=${o}.${a}.0${e?"-0":""}`:E?`>=${r}`:`>=${r}${e?"-0":""}`} ${v=ae(m)?"":ae(g)?`<${+m+1}.0.0-0`:ae(p)?`<${m}.${+g+1}.0-0`:S?`<=${m}.${g}.${p}-${S}`:e?`<${m}.${g}.${+p+1}-0`:`<=${v}`}`.trim(),wo=(e,t,r)=>{for(let o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let o=0;o<e.length;o++)if(X(e[o].semver),e[o].semver!==De.ANY&&e[o].semver.prerelease.length>0){let a=e[o].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0},Io=(e,t,r)=>{try{t=new Ae(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:Ro}=gt,{re:Zt,t:er}=Ue,Oo=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof re)return e;if(typeof e!="string"||e.length>Ro||!(t.loose?Zt[er.LOOSE]:Zt[er.FULL]).test(e))return null;try{return new re(e,t)}catch{return null}},Ao=Oo,{re:Be,t:Ge}=Ue,So=(e,t)=>{if(e instanceof re)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let o;for(;(o=Be[Ge.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&o.index+o[0].length===r.index+r[0].length||(r=o),Be[Ge.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;Be[Ge.COERCERTL].lastIndex=-1}else r=e.match(Be[Ge.COERCE]);return r===null?null:Ao(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function No(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Lo(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function To(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,No))}function Mo(e){return decodeURIComponent(Array.from(atob(e),Lo).join(""))}function hr(e){return To(JSON.stringify(e))}function $o(e){return JSON.parse(Mo(e))}function Ce(e){return typeof e>"u"}function Co(e){return e===null}function pr(e){return Co(e)||Ce(e)}function Do(e){return pr(e)?!1:!Ce(e.jsonrpc)&&!Ce(e.id)&&(!Ce(e.result)||!Ce(e.error))}function Po(e){return pr(e)?!1:typeof e=="number"&&Object.values(_t).includes(e)}function mt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var te={};function Uo(e,t){return Object.assign(te,t),e}var xo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Ee=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Ee.prototype)}},Ke=class extends Error{constructor(t){super(),this.__proto__=Error;let r=Number(t==null?void 0:t.code);this.rawMessage=(t==null?void 0:t.message)||"Internal error",this.code=Po(r)?r:_t.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(t==null?void 0:t.data)||void 0,Object.setPrototypeOf(this,Ke.prototype)}},yt=class{constructor(t,r){this.code=t,this.rawMessage=r,this.message=`Magic SDK Warning: [${t}] ${r}`}log(){console.warn(this.message)}},mr=class extends Error{constructor(t,r,o,a){super(`Magic Extension Error (${t.name}): [${r}] ${o}`),this.code=r,this.rawMessage=o,this.data=a,this.__proto__=Error,Object.setPrototypeOf(this,mr.prototype)}},tr=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function jo(){return new Ee(ye.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function ko(){return new Ee(ye.ModalNotReady,"Modal is not ready.")}function Fo(){return new Ee(ye.MalformedResponse,"Response from the Magic iframe is malformed.")}function Bo(e){return new Ee(ye.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Go(e){let t=`Some extensions are incompatible with \`${te.sdkName}@${te.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let o=r.compat[te.sdkName];typeof o=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${o}\``:o||(t+=`
  - Extension \`${r.name}\` does not support ${te.platform} environments.`)}),new Ee(ye.IncompatibleExtensions,t)}function Ho(e){let t=r=>{let o=r+1,a=o%10,c=o%100;return a===1&&c!==11?`${o}st`:a===2&&c!==12?`${o}nd`:a===3&&c!==13?`${o}rd`:`${o}th`};return new Ee(ye.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function Wo(){return new yt(tt.DuplicateIframe,"Duplicate iframes found.")}function qo(){return new yt(tt.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function zo(){return new yt(tt.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${te.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function*Xo(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Vo=Xo();function vr(){return Vo.next().value}var _r=Symbol("Payload pre-processed by Magic SDK");function gr(e){return Object.defineProperty(e,_r,{value:!0,enumerable:!1}),e}function Ko(e){return!!e[_r]}function Ye(e){var t,r,o;return Ko(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=vr(),e.method=(r=e.method)!=null?r:"noop",e.params=(o=e.params)!=null?o:[],gr(e)),e}function Q(e,t=[]){return gr({params:t,method:e,jsonrpc:"2.0",id:vr()})}var Et=class{constructor(e){e instanceof Et?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Do(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Yo=Bn(Gn()),Jo=class extends Yo.default{};function yr(){let e=new Jo;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...o)=>(e[t].apply(e,o),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var Er=Symbol("isPromiEvent");function Qo(e){return!!e[Er]}function br(e){let t=wr(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:o}=yr(),a=Symbol("Promise.then"),c=Symbol("Promise.catch"),E=Symbol("Promise.finally"),h=(g,p)=>(...S)=>{let L=p[g].apply(p,S);return v(L)},v=g=>Object.assign(g,{[Er]:!0,[a]:g[a]||g.then,[c]:g[c]||g.catch,[E]:g[E]||g.finally,then:h(a,g),catch:h(c,g),finally:h(E,g),on:o("on",g),once:o("once",g),addListener:o("addListener",g),off:o("off",g),removeListener:o("removeListener",g),removeAllListeners:o("removeAllListeners",g),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),m=v(t.then(g=>(m.emit("done",g),m.emit("settled"),g),g=>{throw m.emit("error",g),m.emit("settled"),g}));return m}function wr(e){return new Promise((t,r)=>{let o=e(t,r);Promise.resolve(o).catch(r)})}var be=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,Ye(e)),r=br((a,c)=>{t.then(E=>{if(o(),E.hasError)c(new Ke(E.payload.error));else if(E.hasResult)a(E.payload.result);else throw Fo()}).catch(E=>{o(),c(E)})}),o=this.overlay.on(Oe.MAGIC_HANDLE_EVENT,a=>{var c;let{response:E}=a.data;if(E.id===e.id&&((c=E.result)!=null&&c.event)){let{event:h,params:v=[]}=E.result;r.emit(h,...v)}});return r}createIntermediaryEvent(e,t){return r=>{let o=Q(W.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(o)}}},Zo=class extends be{loginWithMagicLink(e){let{email:t,showUI:r=!0,redirectURI:o}=e,a=Q(this.sdk.testMode?W.LoginWithMagicLinkTestMode:W.LoginWithMagicLink,[{email:t,showUI:r,redirectURI:o}]);return this.request(a)}loginWithSMS(e){let{phoneNumber:t}=e,r=Q(this.sdk.testMode?W.LoginWithSmsTestMode:W.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r}=e,o=Q(this.sdk.testMode?W.LoginWithEmailOTPTestMode:W.LoginWithEmailOTP,[{email:t,showUI:r}]);if(!r){let a=this.request(o);return a&&a.on("otp-input-sent",c=>{this.createIntermediaryEvent("verify-email-otp",o.id)(c)}),a}return this.request(o)}loginWithCredential(e){let t=e??"";if(!e&&te.platform==="web"){t=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let r=Q(this.sdk.testMode?W.LoginWithCredentialTestMode:W.LoginWithCredential,[t]);return this.request(r)}},Ir={};kn(Ir,{clear:()=>ei,getItem:()=>Pe,iterate:()=>oi,key:()=>ri,keys:()=>ni,length:()=>ti,removeItem:()=>vt,setItem:()=>Je});var He;function ve(e){return(...t)=>de(this,null,function*(){return He||(He=yield te.configureStorage()),yield He.ready(),He[e](...t)})}var Pe=ve("getItem"),Je=ve("setItem"),vt=ve("removeItem"),ei=ve("clear"),ti=ve("length"),ri=ve("key"),ni=ve("keys"),oi=ve("iterate");function ii(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var bt="STORE_KEY_PRIVATE_KEY",Qe="STORE_KEY_PUBLIC_JWK",wt="ECDSA",Rr="P-256",si={name:wt,namedCurve:Rr},ai={name:wt,namedCurve:Rr};function Or(){vt(Qe),vt(bt)}function ci(){return de(this,null,function*(){let e=yield ui();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield Pe(bt);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let o={iat:Math.floor(new Date().getTime()/1e3),jti:ii()},a={typ:"dpop+jwt",alg:"ES256",jwk:e},c={protected:rr(JSON.stringify(a)),claims:rr(JSON.stringify(o))},E=di(`${c.protected}.${c.claims}`),h={name:wt,hash:{name:"SHA-256"}},v=pi(new Uint8Array(yield t.sign(h,r,E)));return`${c.protected}.${c.claims}.${v}`})}function ui(){return de(this,null,function*(){if(!fi()){console.info("webcrypto is not supported");return}return(yield Pe(Qe))||(yield li()),Pe(Qe)})}function li(){return de(this,null,function*(){let e=null,{subtle:t}=window.crypto,r=yield t.generateKey(si,!0,["sign"]),o=yield t.exportKey("jwk",r.privateKey);e=yield t.exportKey("jwk",r.publicKey);let a=yield t.importKey("jwk",o,ai,!1,["sign"]);yield Je(bt,a),yield Je(Qe,e)})}function fi(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function rr(e){return Ar(hi(e))}function di(e){return new TextEncoder().encode(e)}function Ar(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function hi(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function pi(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),Ar(t)}var mi=class extends be{getIdToken(t){let r=Q(this.sdk.testMode?W.GetIdTokenTestMode:W.GetIdToken,[t]);return this.request(r)}generateIdToken(t){let r=Q(this.sdk.testMode?W.GenerateIdTokenTestMode:W.GenerateIdToken,[t]);return this.request(r)}getMetadata(){let t=Q(this.sdk.testMode?W.GetMetadataTestMode:W.GetMetadata);return this.request(t)}updateEmail(t){let{email:r,showUI:o=!0}=t,a=Q(this.sdk.testMode?W.UpdateEmailTestMode:W.UpdateEmail,[{email:r,showUI:o}]);return this.request(a)}isLoggedIn(){let t=Q(this.sdk.testMode?W.IsLoggedInTestMode:W.IsLoggedIn);return this.request(t)}logout(){Or();let t=Q(this.sdk.testMode?W.LogoutTestMode:W.Logout);return this.request(t)}showSettings(){let t=Q(this.sdk.testMode?W.UserSettingsTestMode:W.UserSettings);return this.request(t)}updatePhoneNumber(){let t=Q(this.sdk.testMode?W.UpdatePhoneNumberTestMode:W.UpdatePhoneNumber);return this.request(t)}recoverAccount(t){let r=Q(this.sdk.testMode?W.RecoverAccountTestMode:W.RecoverAccount,[t]);return this.request(r)}},vi=class extends be{connectWithUI(){let e=Q(W.RequestAccounts);return this.request(e)}showUI(){let e=Q(W.ShowUI);return this.request(e)}getInfo(){let e=Q(W.GetInfo);return this.request(e)}requestUserInfoWithUI(e){let t=Q(W.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}disconnect(){Or();let e=Q(W.Disconnect);return this.request(e)}},{createBoundEmitterMethod:We,createChainingEmitterMethod:Re}=yr(),_i=class extends be{constructor(){super(...arguments),this.isMagic=!0,this.on=Re("on",this),this.once=Re("once",this),this.addListener=Re("addListener",this),this.off=Re("off",this),this.removeListener=Re("removeListener",this),this.removeAllListeners=Re("removeAllListeners",this),this.emit=We("emit"),this.eventNames=We("eventNames"),this.listeners=We("listeners"),this.listenerCount=We("listenerCount")}sendAsync(e,t){if(!t)throw Ho({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,e.map(r=>{let o=Ye(r);return this.prefixPayloadMethodForTestMode(o),o})).then(r=>{t(null,r.map(o=>xn(fr({},o.payload),{error:o.hasError?new Ke(o.payload.error):null})))});else{let r=Ye(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,r).then(o=>{t(o.hasError?new Ke(o.payload.error):null,o.payload)})}}send(e,t){if(typeof e=="string"){let o=Q(e,Array.isArray(t)?t:[]);return this.request(o)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let r=qo();return r.log(),new Et(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=Q("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}};function Ze(e,t){return t?new URL(e,t):new URL(e)}var nr=["request","overlay","sdk"];function gi(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==be.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Sr=class extends be{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:br,isPromiEvent:Qo,encodeJSON:hr,decodeJSON:$o,createJsonRpcRequestPayload:Q,standardizeJsonRpcRequestPayload:Ye,storage:Ir};let t=[this,...gi(this)];nr.forEach(r=>{let o=t.map(h=>Object.getOwnPropertyDescriptor(h,r)),a=o.findIndex(h=>!!h),c=a>0,E=o[a];E&&(this.__sdk_access_field_descriptors__.set(r,{descriptor:E,isPrototypeField:c}),Object.defineProperty(this,r,{configurable:!0,get:()=>{throw Bo(r)}}))})}init(t){this.__is_initialized__||(nr.forEach(r=>{if(this.__sdk_access_field_descriptors__.has(r)){let{descriptor:o,isPrototypeField:a}=this.__sdk_access_field_descriptors__.get(r);a?delete this[r]:Object.defineProperty(this,r,o)}}),this.sdk=t,this.__is_initialized__=!0)}createDeprecationWarning(t){let{method:r,removalVersion:o,useInstead:a}=t,c=a?` Use \`${a}\` instead.`:"",E=`\`${r}\` will be removed from this Extension in version \`${o}\`.${c}`;return new tr(this,"DEPRECATION_NOTICE",E)}createWarning(t,r){return new tr(this,t,r)}createError(t,r,o){return new mr(this,t,r,o)}},yi=class extends Sr{},Se=class extends Sr{};Se.Internal=yi,Se.Anonymous="anonymous extension";var Ei=class extends be{purchase(e){let t=Q(W.NFTPurchase,[e]);return this.request(t)}};function or(e){return e.compat&&e.compat[te.sdkName]!=null?typeof e.compat[te.sdkName]=="string"?Io(So(te.version),e.compat[te.sdkName]):!!e.compat[te.sdkName]:!0}function bi(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],o={},a=[];if(Array.isArray(r)?r.forEach(c=>{or(c)?(c.init(this),(c.name||c.name!==Se.Anonymous)&&(this[c.name]=c),c instanceof Se.Internal&&(mt(c.config)||(o[c.name]=c.config))):a.push(c)}):Object.keys(r).forEach(c=>{if(or(r[c])){r[c].init(this);let E=r[c];this[c]=E,E instanceof Se.Internal&&(mt(E.config)||(o[r[c].name]=E.config))}else a.push(r[c])}),a.length)throw Go(a);return o}var ze=class{constructor(t,r){this.apiKey=t;var o;if(!t)throw jo();te.platform==="react-native"&&(r!=null&&r.endpoint)&&zo().log();let{defaultEndpoint:a,version:c}=te;this.testMode=!!(r!=null&&r.testMode),this.endpoint=Ze((o=r==null?void 0:r.endpoint)!=null?o:a).origin,this.auth=new Zo(this),this.user=new mi(this),this.wallet=new vi(this),this.nft=new Ei(this),this.rpcProvider=new _i(this);let E=bi.call(this,r);this.parameters=hr(fr({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:r==null?void 0:r.network,host:Ze(this.endpoint).host,sdk:xo[te.sdkName],version:c,ext:mt(E)?void 0:E,locale:(r==null?void 0:r.locale)||"en_US"},te.bundleId?{bundleId:te.bundleId}:{}))}get overlay(){if(!ze.__overlays__.has(this.parameters)){let t=new te.ViewController(this.endpoint,this.parameters);t.init(),ze.__overlays__.set(this.parameters,t)}return ze.__overlays__.get(this.parameters)}preload(){return de(this,null,function*(){yield this.overlay.ready})}},Nr=ze;Nr.__overlays__=new Map;function wi(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function Ii(e,t){var r;let o=(r=t.data.response)==null?void 0:r.id,a=wi(e,o);if(o&&a){let c=new Et(a).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:o,response:c}}return{}}function Ri(e,t){return de(this,null,function*(){let r=yield Pe("rt"),o;if(te.platform==="web")try{o=yield ci()}catch(a){console.error("webcrypto error",a)}return o?r?{msgType:e,payload:t,jwt:o,rt:r}:{msgType:e,payload:t,jwt:o}:{msgType:e,payload:t}})}function Oi(e){return de(this,null,function*(){!e.data.rt||(yield Je("rt",e.data.rt))})}var Ai=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return de(this,null,function*(){return wr(r=>de(this,null,function*(){yield this.ready;let o=[],a=Array.isArray(t)?t.map(v=>v.id):[],c=yield Ri(`${e}-${this.parameters}`,t);yield this._post(c);let E=v=>m=>{let{id:g,response:p}=Ii(t,m);Oi(m),g&&p&&Array.isArray(t)&&a.includes(g)?(o.push(p),o.length===t.length&&(v(),r(o))):g&&p&&!Array.isArray(t)&&g===t.id&&(v(),r(p))},h=this.on(Oe.MAGIC_HANDLE_RESPONSE,E(()=>h()))}))})}on(e,t){let r=t.bind(window),o=a=>{a.data.msgType===`${e}-${this.parameters}`&&r(a)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{this.on(Oe.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(Oe.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Oe.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},Si=Object.create,Lr=Object.defineProperty,Ni=Object.getOwnPropertyDescriptor,Li=Object.getOwnPropertyNames,Ti=Object.getPrototypeOf,Mi=Object.prototype.hasOwnProperty,qe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Tr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$i=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Li(t))!Mi.call(e,a)&&a!==r&&Lr(e,a,{get:()=>t[a],enumerable:!(o=Ni(t,a))||o.enumerable});return e},Mr=(e,t,r)=>(r=e!=null?Si(Ti(e)):{},$i(t||!e||!e.__esModule?Lr(r,"default",{value:e,enumerable:!0}):r,e)),Xe=(e,t,r)=>new Promise((o,a)=>{var c=v=>{try{h(r.next(v))}catch(m){a(m)}},E=v=>{try{h(r.throw(v))}catch(m){a(m)}},h=v=>v.done?o(v.value):Promise.resolve(v.value).then(c,E);h((r=r.apply(e,t)).next())}),Ci=Tr((e,t)=>{(function(r){if(typeof e=="object"&&typeof t<"u")t.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var o;typeof window<"u"?o=window:typeof global<"u"?o=global:typeof self<"u"?o=self:o=this,o.localforage=r()}})(function(){return function r(o,a,c){function E(m,g){if(!a[m]){if(!o[m]){var p=typeof qe=="function"&&qe;if(!g&&p)return p(m,!0);if(h)return h(m,!0);var S=new Error("Cannot find module '"+m+"'");throw S.code="MODULE_NOT_FOUND",S}var L=a[m]={exports:{}};o[m][0].call(L.exports,function(D){var M=o[m][1][D];return E(M||D)},L,L.exports,r,o,a,c)}return a[m].exports}for(var h=typeof qe=="function"&&qe,v=0;v<c.length;v++)E(c[v]);return E}({1:[function(r,o,a){(function(c){var E=c.MutationObserver||c.WebKitMutationObserver,h;if(E){var v=0,m=new E(D),g=c.document.createTextNode("");m.observe(g,{characterData:!0}),h=function(){g.data=v=++v%2}}else if(!c.setImmediate&&typeof c.MessageChannel<"u"){var p=new c.MessageChannel;p.port1.onmessage=D,h=function(){p.port2.postMessage(0)}}else"document"in c&&"onreadystatechange"in c.document.createElement("script")?h=function(){var d=c.document.createElement("script");d.onreadystatechange=function(){D(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},c.document.documentElement.appendChild(d)}:h=function(){setTimeout(D,0)};var S,L=[];function D(){S=!0;for(var d,N,C=L.length;C;){for(N=L,L=[],d=-1;++d<C;)N[d]();C=L.length}S=!1}o.exports=M;function M(d){L.push(d)===1&&!S&&h()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,o,a){var c=r(1);function E(){}var h={},v=["REJECTED"],m=["FULFILLED"],g=["PENDING"];o.exports=p;function p(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,b!==E&&M(this,b)}p.prototype.catch=function(b){return this.then(null,b)},p.prototype.then=function(b,F){if(typeof b!="function"&&this.state===m||typeof F!="function"&&this.state===v)return this;var U=new this.constructor(E);if(this.state!==g){var k=this.state===m?b:F;L(U,k,this.outcome)}else this.queue.push(new S(U,b,F));return U};function S(b,F,U){this.promise=b,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(b){h.resolve(this.promise,b)},S.prototype.otherCallFulfilled=function(b){L(this.promise,this.onFulfilled,b)},S.prototype.callRejected=function(b){h.reject(this.promise,b)},S.prototype.otherCallRejected=function(b){L(this.promise,this.onRejected,b)};function L(b,F,U){c(function(){var k;try{k=F(U)}catch(q){return h.reject(b,q)}k===b?h.reject(b,new TypeError("Cannot resolve promise with itself")):h.resolve(b,k)})}h.resolve=function(b,F){var U=d(D,F);if(U.status==="error")return h.reject(b,U.value);var k=U.value;if(k)M(b,k);else{b.state=m,b.outcome=F;for(var q=-1,K=b.queue.length;++q<K;)b.queue[q].callFulfilled(F)}return b},h.reject=function(b,F){b.state=v,b.outcome=F;for(var U=-1,k=b.queue.length;++U<k;)b.queue[U].callRejected(F);return b};function D(b){var F=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof F=="function")return function(){F.apply(b,arguments)}}function M(b,F){var U=!1;function k(oe){U||(U=!0,h.reject(b,oe))}function q(oe){U||(U=!0,h.resolve(b,oe))}function K(){F(q,k)}var Z=d(K);Z.status==="error"&&k(Z.value)}function d(b,F){var U={};try{U.value=b(F),U.status="success"}catch(k){U.status="error",U.value=k}return U}p.resolve=N;function N(b){return b instanceof this?b:h.resolve(new this(E),b)}p.reject=C;function C(b){var F=new this(E);return h.reject(F,b)}p.all=$;function $(b){var F=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=b.length,k=!1;if(!U)return this.resolve([]);for(var q=new Array(U),K=0,Z=-1,oe=new this(E);++Z<U;)ce(b[Z],Z);return oe;function ce(fe,he){F.resolve(fe).then(_e,function(le){k||(k=!0,h.reject(oe,le))});function _e(le){q[he]=le,++K===U&&!k&&(k=!0,h.resolve(oe,q))}}}p.race=B;function B(b){var F=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=b.length,k=!1;if(!U)return this.resolve([]);for(var q=-1,K=new this(E);++q<U;)Z(b[q]);return K;function Z(oe){F.resolve(oe).then(function(ce){k||(k=!0,h.resolve(K,ce))},function(ce){k||(k=!0,h.reject(K,ce))})}}},{1:1}],3:[function(r,o,a){(function(c){typeof c.Promise!="function"&&(c.Promise=r(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,o,a){var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function E(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var v=h();function m(){try{if(!v||!v.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(n,i){n=n||[],i=i||{};try{return new Blob(n,i)}catch(f){if(f.name!=="TypeError")throw f;for(var s=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,l=new s,u=0;u<n.length;u+=1)l.append(n[u]);return l.getBlob(i.type)}}typeof Promise>"u"&&r(3);var p=Promise;function S(n,i){i&&n.then(function(s){i(null,s)},function(s){i(s)})}function L(n,i,s){typeof i=="function"&&n.then(i),typeof s=="function"&&n.catch(s)}function D(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function M(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",N=void 0,C={},$=Object.prototype.toString,B="readonly",b="readwrite";function F(n){for(var i=n.length,s=new ArrayBuffer(i),l=new Uint8Array(s),u=0;u<i;u++)l[u]=n.charCodeAt(u);return s}function U(n){return new p(function(i){var s=n.transaction(d,b),l=g([""]);s.objectStore(d).put(l,"key"),s.onabort=function(u){u.preventDefault(),u.stopPropagation(),i(!1)},s.oncomplete=function(){var u=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);i(f||!u||parseInt(u[1],10)>=43)}}).catch(function(){return!1})}function k(n){return typeof N=="boolean"?p.resolve(N):U(n).then(function(i){return N=i,N})}function q(n){var i=C[n.name],s={};s.promise=new p(function(l,u){s.resolve=l,s.reject=u}),i.deferredOperations.push(s),i.dbReady?i.dbReady=i.dbReady.then(function(){return s.promise}):i.dbReady=s.promise}function K(n){var i=C[n.name],s=i.deferredOperations.pop();if(s)return s.resolve(),s.promise}function Z(n,i){var s=C[n.name],l=s.deferredOperations.pop();if(l)return l.reject(i),l.promise}function oe(n,i){return new p(function(s,l){if(C[n.name]=C[n.name]||j(),n.db)if(i)q(n),n.db.close();else return s(n.db);var u=[n.name];i&&u.push(n.version);var f=v.open.apply(v,u);i&&(f.onupgradeneeded=function(y){var w=f.result;try{w.createObjectStore(n.storeName),y.oldVersion<=1&&w.createObjectStore(d)}catch(A){if(A.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+y.oldVersion+" to version "+y.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw A}}),f.onerror=function(y){y.preventDefault(),l(f.error)},f.onsuccess=function(){var y=f.result;y.onversionchange=function(w){w.target.close()},s(y),K(n)}})}function ce(n){return oe(n,!1)}function fe(n){return oe(n,!0)}function he(n,i){if(!n.db)return!0;var s=!n.db.objectStoreNames.contains(n.storeName),l=n.version<n.db.version,u=n.version>n.db.version;if(l&&(n.version!==i&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),u||s){if(s){var f=n.db.version+1;f>n.version&&(n.version=f)}return!0}return!1}function _e(n){return new p(function(i,s){var l=new FileReader;l.onerror=s,l.onloadend=function(u){var f=btoa(u.target.result||"");i({__local_forage_encoded_blob:!0,data:f,type:n.type})},l.readAsBinaryString(n)})}function le(n){var i=F(atob(n.data));return g([i],{type:n.type})}function _(n){return n&&n.__local_forage_encoded_blob}function I(n){var i=this,s=i._initReady().then(function(){var l=C[i._dbInfo.name];if(l&&l.dbReady)return l.dbReady});return L(s,n,n),s}function T(n){q(n);for(var i=C[n.name],s=i.forages,l=0;l<s.length;l++){var u=s[l];u._dbInfo.db&&(u._dbInfo.db.close(),u._dbInfo.db=null)}return n.db=null,ce(n).then(function(f){return n.db=f,he(n)?fe(n):f}).then(function(f){n.db=i.db=f;for(var y=0;y<s.length;y++)s[y]._dbInfo.db=f}).catch(function(f){throw Z(n,f),f})}function P(n,i,s,l){l===void 0&&(l=1);try{var u=n.db.transaction(n.storeName,i);s(null,u)}catch(f){if(l>0&&(!n.db||f.name==="InvalidStateError"||f.name==="NotFoundError"))return p.resolve().then(function(){if(!n.db||f.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),fe(n)}).then(function(){return T(n).then(function(){P(n,i,s,l-1)})}).catch(s);s(f)}}function j(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function G(n){var i=this,s={db:null};if(n)for(var l in n)s[l]=n[l];var u=C[s.name];u||(u=j(),C[s.name]=u),u.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=I);var f=[];function y(){return p.resolve()}for(var w=0;w<u.forages.length;w++){var A=u.forages[w];A!==i&&f.push(A._initReady().catch(y))}var O=u.forages.slice(0);return p.all(f).then(function(){return s.db=u.db,ce(s)}).then(function(R){return s.db=R,he(s,i._defaultConfig.version)?fe(s):R}).then(function(R){s.db=u.db=R,i._dbInfo=s;for(var x=0;x<O.length;x++){var H=O[x];H!==i&&(H._dbInfo.db=s.db,H._dbInfo.version=s.version)}})}function Y(n,i){var s=this;n=D(n);var l=new p(function(u,f){s.ready().then(function(){P(s._dbInfo,B,function(y,w){if(y)return f(y);try{var A=w.objectStore(s._dbInfo.storeName),O=A.get(n);O.onsuccess=function(){var R=O.result;R===void 0&&(R=null),_(R)&&(R=le(R)),u(R)},O.onerror=function(){f(O.error)}}catch(R){f(R)}})}).catch(f)});return S(l,i),l}function ie(n,i){var s=this,l=new p(function(u,f){s.ready().then(function(){P(s._dbInfo,B,function(y,w){if(y)return f(y);try{var A=w.objectStore(s._dbInfo.storeName),O=A.openCursor(),R=1;O.onsuccess=function(){var x=O.result;if(x){var H=x.value;_(H)&&(H=le(H));var V=n(H,x.key,R++);V!==void 0?u(V):x.continue()}else u()},O.onerror=function(){f(O.error)}}catch(x){f(x)}})}).catch(f)});return S(l,i),l}function we(n,i,s){var l=this;n=D(n);var u=new p(function(f,y){var w;l.ready().then(function(){return w=l._dbInfo,$.call(i)==="[object Blob]"?k(w.db).then(function(A){return A?i:_e(i)}):i}).then(function(A){P(l._dbInfo,b,function(O,R){if(O)return y(O);try{var x=R.objectStore(l._dbInfo.storeName);A===null&&(A=void 0);var H=x.put(A,n);R.oncomplete=function(){A===void 0&&(A=null),f(A)},R.onabort=R.onerror=function(){var V=H.error?H.error:H.transaction.error;y(V)}}catch(V){y(V)}})}).catch(y)});return S(u,s),u}function ge(n,i){var s=this;n=D(n);var l=new p(function(u,f){s.ready().then(function(){P(s._dbInfo,b,function(y,w){if(y)return f(y);try{var A=w.objectStore(s._dbInfo.storeName),O=A.delete(n);w.oncomplete=function(){u()},w.onerror=function(){f(O.error)},w.onabort=function(){var R=O.error?O.error:O.transaction.error;f(R)}}catch(R){f(R)}})}).catch(f)});return S(l,i),l}function Le(n){var i=this,s=new p(function(l,u){i.ready().then(function(){P(i._dbInfo,b,function(f,y){if(f)return u(f);try{var w=y.objectStore(i._dbInfo.storeName),A=w.clear();y.oncomplete=function(){l()},y.onabort=y.onerror=function(){var O=A.error?A.error:A.transaction.error;u(O)}}catch(O){u(O)}})}).catch(u)});return S(s,n),s}function Ur(n){var i=this,s=new p(function(l,u){i.ready().then(function(){P(i._dbInfo,B,function(f,y){if(f)return u(f);try{var w=y.objectStore(i._dbInfo.storeName),A=w.count();A.onsuccess=function(){l(A.result)},A.onerror=function(){u(A.error)}}catch(O){u(O)}})}).catch(u)});return S(s,n),s}function xr(n,i){var s=this,l=new p(function(u,f){if(n<0){u(null);return}s.ready().then(function(){P(s._dbInfo,B,function(y,w){if(y)return f(y);try{var A=w.objectStore(s._dbInfo.storeName),O=!1,R=A.openKeyCursor();R.onsuccess=function(){var x=R.result;if(!x){u(null);return}n===0||O?u(x.key):(O=!0,x.advance(n))},R.onerror=function(){f(R.error)}}catch(x){f(x)}})}).catch(f)});return S(l,i),l}function jr(n){var i=this,s=new p(function(l,u){i.ready().then(function(){P(i._dbInfo,B,function(f,y){if(f)return u(f);try{var w=y.objectStore(i._dbInfo.storeName),A=w.openKeyCursor(),O=[];A.onsuccess=function(){var R=A.result;if(!R){l(O);return}O.push(R.key),R.continue()},A.onerror=function(){u(A.error)}}catch(R){u(R)}})}).catch(u)});return S(s,n),s}function kr(n,i){i=M.apply(this,arguments);var s=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||s.name,n.storeName=n.storeName||s.storeName);var l=this,u;if(!n.name)u=p.reject("Invalid arguments");else{var f=n.name===s.name&&l._dbInfo.db,y=f?p.resolve(l._dbInfo.db):ce(n).then(function(w){var A=C[n.name],O=A.forages;A.db=w;for(var R=0;R<O.length;R++)O[R]._dbInfo.db=w;return w});n.storeName?u=y.then(function(w){if(w.objectStoreNames.contains(n.storeName)){var A=w.version+1;q(n);var O=C[n.name],R=O.forages;w.close();for(var x=0;x<R.length;x++){var H=R[x];H._dbInfo.db=null,H._dbInfo.version=A}var V=new p(function(z,ee){var J=v.open(n.name,A);J.onerror=function(ue){var lt=J.result;lt.close(),ee(ue)},J.onupgradeneeded=function(){var ue=J.result;ue.deleteObjectStore(n.storeName)},J.onsuccess=function(){var ue=J.result;ue.close(),z(ue)}});return V.then(function(z){O.db=z;for(var ee=0;ee<R.length;ee++){var J=R[ee];J._dbInfo.db=z,K(J._dbInfo)}}).catch(function(z){throw(Z(n,z)||p.resolve()).catch(function(){}),z})}}):u=y.then(function(w){q(n);var A=C[n.name],O=A.forages;w.close();for(var R=0;R<O.length;R++){var x=O[R];x._dbInfo.db=null}var H=new p(function(V,z){var ee=v.deleteDatabase(n.name);ee.onerror=function(){var J=ee.result;J&&J.close(),z(ee.error)},ee.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},ee.onsuccess=function(){var J=ee.result;J&&J.close(),V(J)}});return H.then(function(V){A.db=V;for(var z=0;z<O.length;z++){var ee=O[z];K(ee._dbInfo)}}).catch(function(V){throw(Z(n,V)||p.resolve()).catch(function(){}),V})})}return S(u,i),u}var Fr={_driver:"asyncStorage",_initStorage:G,_support:m(),iterate:ie,getItem:Y,setItem:we,removeItem:ge,clear:Le,length:Ur,key:xr,keys:jr,dropInstance:kr};function Br(){return typeof openDatabase=="function"}var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gr="~~local_forage_type~",Rt=/^~~local_forage_type~([^~]+)~/,je="__lfsc__:",nt=je.length,ot="arbf",it="blob",Ot="si08",At="ui08",St="uic8",Nt="si16",Lt="si32",Tt="ur16",Mt="ui32",$t="fl32",Ct="fl64",Dt=nt+ot.length,Pt=Object.prototype.toString;function Ut(n){var i=n.length*.75,s=n.length,l,u=0,f,y,w,A;n[n.length-1]==="="&&(i--,n[n.length-2]==="="&&i--);var O=new ArrayBuffer(i),R=new Uint8Array(O);for(l=0;l<s;l+=4)f=pe.indexOf(n[l]),y=pe.indexOf(n[l+1]),w=pe.indexOf(n[l+2]),A=pe.indexOf(n[l+3]),R[u++]=f<<2|y>>4,R[u++]=(y&15)<<4|w>>2,R[u++]=(w&3)<<6|A&63;return O}function st(n){var i=new Uint8Array(n),s="",l;for(l=0;l<i.length;l+=3)s+=pe[i[l]>>2],s+=pe[(i[l]&3)<<4|i[l+1]>>4],s+=pe[(i[l+1]&15)<<2|i[l+2]>>6],s+=pe[i[l+2]&63];return i.length%3===2?s=s.substring(0,s.length-1)+"=":i.length%3===1&&(s=s.substring(0,s.length-2)+"=="),s}function Hr(n,i){var s="";if(n&&(s=Pt.call(n)),n&&(s==="[object ArrayBuffer]"||n.buffer&&Pt.call(n.buffer)==="[object ArrayBuffer]")){var l,u=je;n instanceof ArrayBuffer?(l=n,u+=ot):(l=n.buffer,s==="[object Int8Array]"?u+=Ot:s==="[object Uint8Array]"?u+=At:s==="[object Uint8ClampedArray]"?u+=St:s==="[object Int16Array]"?u+=Nt:s==="[object Uint16Array]"?u+=Tt:s==="[object Int32Array]"?u+=Lt:s==="[object Uint32Array]"?u+=Mt:s==="[object Float32Array]"?u+=$t:s==="[object Float64Array]"?u+=Ct:i(new Error("Failed to get type for BinaryArray"))),i(u+st(l))}else if(s==="[object Blob]"){var f=new FileReader;f.onload=function(){var y=Gr+n.type+"~"+st(this.result);i(je+it+y)},f.readAsArrayBuffer(n)}else try{i(JSON.stringify(n))}catch(y){console.error("Couldn't convert value into a JSON string: ",n),i(null,y)}}function Wr(n){if(n.substring(0,nt)!==je)return JSON.parse(n);var i=n.substring(Dt),s=n.substring(nt,Dt),l;if(s===it&&Rt.test(i)){var u=i.match(Rt);l=u[1],i=i.substring(u[0].length)}var f=Ut(i);switch(s){case ot:return f;case it:return g([f],{type:l});case Ot:return new Int8Array(f);case At:return new Uint8Array(f);case St:return new Uint8ClampedArray(f);case Nt:return new Int16Array(f);case Tt:return new Uint16Array(f);case Lt:return new Int32Array(f);case Mt:return new Uint32Array(f);case $t:return new Float32Array(f);case Ct:return new Float64Array(f);default:throw new Error("Unkown type: "+s)}}var at={serialize:Hr,deserialize:Wr,stringToBuffer:Ut,bufferToString:st};function xt(n,i,s,l){n.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],s,l)}function qr(n){var i=this,s={db:null};if(n)for(var l in n)s[l]=typeof n[l]!="string"?n[l].toString():n[l];var u=new p(function(f,y){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(w){return y(w)}s.db.transaction(function(w){xt(w,s,function(){i._dbInfo=s,f()},function(A,O){y(O)})},y)});return s.serializer=at,u}function me(n,i,s,l,u,f){n.executeSql(s,l,u,function(y,w){w.code===w.SYNTAX_ERR?y.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(A,O){O.rows.length?f(A,w):xt(A,i,function(){A.executeSql(s,l,u,f)},f)},f):f(y,w)},f)}function zr(n,i){var s=this;n=D(n);var l=new p(function(u,f){s.ready().then(function(){var y=s._dbInfo;y.db.transaction(function(w){me(w,y,"SELECT * FROM "+y.storeName+" WHERE key = ? LIMIT 1",[n],function(A,O){var R=O.rows.length?O.rows.item(0).value:null;R&&(R=y.serializer.deserialize(R)),u(R)},function(A,O){f(O)})})}).catch(f)});return S(l,i),l}function Xr(n,i){var s=this,l=new p(function(u,f){s.ready().then(function(){var y=s._dbInfo;y.db.transaction(function(w){me(w,y,"SELECT * FROM "+y.storeName,[],function(A,O){for(var R=O.rows,x=R.length,H=0;H<x;H++){var V=R.item(H),z=V.value;if(z&&(z=y.serializer.deserialize(z)),z=n(z,V.key,H+1),z!==void 0){u(z);return}}u()},function(A,O){f(O)})})}).catch(f)});return S(l,i),l}function jt(n,i,s,l){var u=this;n=D(n);var f=new p(function(y,w){u.ready().then(function(){i===void 0&&(i=null);var A=i,O=u._dbInfo;O.serializer.serialize(i,function(R,x){x?w(x):O.db.transaction(function(H){me(H,O,"INSERT OR REPLACE INTO "+O.storeName+" (key, value) VALUES (?, ?)",[n,R],function(){y(A)},function(V,z){w(z)})},function(H){if(H.code===H.QUOTA_ERR){if(l>0){y(jt.apply(u,[n,A,s,l-1]));return}w(H)}})})}).catch(w)});return S(f,s),f}function Vr(n,i,s){return jt.apply(this,[n,i,s,1])}function Kr(n,i){var s=this;n=D(n);var l=new p(function(u,f){s.ready().then(function(){var y=s._dbInfo;y.db.transaction(function(w){me(w,y,"DELETE FROM "+y.storeName+" WHERE key = ?",[n],function(){u()},function(A,O){f(O)})})}).catch(f)});return S(l,i),l}function Yr(n){var i=this,s=new p(function(l,u){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(y){me(y,f,"DELETE FROM "+f.storeName,[],function(){l()},function(w,A){u(A)})})}).catch(u)});return S(s,n),s}function Jr(n){var i=this,s=new p(function(l,u){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(y){me(y,f,"SELECT COUNT(key) as c FROM "+f.storeName,[],function(w,A){var O=A.rows.item(0).c;l(O)},function(w,A){u(A)})})}).catch(u)});return S(s,n),s}function Qr(n,i){var s=this,l=new p(function(u,f){s.ready().then(function(){var y=s._dbInfo;y.db.transaction(function(w){me(w,y,"SELECT key FROM "+y.storeName+" WHERE id = ? LIMIT 1",[n+1],function(A,O){var R=O.rows.length?O.rows.item(0).key:null;u(R)},function(A,O){f(O)})})}).catch(f)});return S(l,i),l}function Zr(n){var i=this,s=new p(function(l,u){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(y){me(y,f,"SELECT key FROM "+f.storeName,[],function(w,A){for(var O=[],R=0;R<A.rows.length;R++)O.push(A.rows.item(R).key);l(O)},function(w,A){u(A)})})}).catch(u)});return S(s,n),s}function en(n){return new p(function(i,s){n.transaction(function(l){l.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(u,f){for(var y=[],w=0;w<f.rows.length;w++)y.push(f.rows.item(w).name);i({db:n,storeNames:y})},function(u,f){s(f)})},function(l){s(l)})})}function tn(n,i){i=M.apply(this,arguments);var s=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||s.name,n.storeName=n.storeName||s.storeName);var l=this,u;return n.name?u=new p(function(f){var y;n.name===s.name?y=l._dbInfo.db:y=openDatabase(n.name,"","",0),n.storeName?f({db:y,storeNames:[n.storeName]}):f(en(y))}).then(function(f){return new p(function(y,w){f.db.transaction(function(A){function O(V){return new p(function(z,ee){A.executeSql("DROP TABLE IF EXISTS "+V,[],function(){z()},function(J,ue){ee(ue)})})}for(var R=[],x=0,H=f.storeNames.length;x<H;x++)R.push(O(f.storeNames[x]));p.all(R).then(function(){y()}).catch(function(V){w(V)})},function(A){w(A)})})}):u=p.reject("Invalid arguments"),S(u,i),u}var rn={_driver:"webSQLStorage",_initStorage:qr,_support:Br(),iterate:Xr,getItem:zr,setItem:Vr,removeItem:Kr,clear:Yr,length:Jr,key:Qr,keys:Zr,dropInstance:tn};function nn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function kt(n,i){var s=n.name+"/";return n.storeName!==i.storeName&&(s+=n.storeName+"/"),s}function on(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function sn(){return!on()||localStorage.length>0}function an(n){var i=this,s={};if(n)for(var l in n)s[l]=n[l];return s.keyPrefix=kt(n,i._defaultConfig),sn()?(i._dbInfo=s,s.serializer=at,p.resolve()):p.reject()}function cn(n){var i=this,s=i.ready().then(function(){for(var l=i._dbInfo.keyPrefix,u=localStorage.length-1;u>=0;u--){var f=localStorage.key(u);f.indexOf(l)===0&&localStorage.removeItem(f)}});return S(s,n),s}function un(n,i){var s=this;n=D(n);var l=s.ready().then(function(){var u=s._dbInfo,f=localStorage.getItem(u.keyPrefix+n);return f&&(f=u.serializer.deserialize(f)),f});return S(l,i),l}function ln(n,i){var s=this,l=s.ready().then(function(){for(var u=s._dbInfo,f=u.keyPrefix,y=f.length,w=localStorage.length,A=1,O=0;O<w;O++){var R=localStorage.key(O);if(R.indexOf(f)===0){var x=localStorage.getItem(R);if(x&&(x=u.serializer.deserialize(x)),x=n(x,R.substring(y),A++),x!==void 0)return x}}});return S(l,i),l}function fn(n,i){var s=this,l=s.ready().then(function(){var u=s._dbInfo,f;try{f=localStorage.key(n)}catch{f=null}return f&&(f=f.substring(u.keyPrefix.length)),f});return S(l,i),l}function dn(n){var i=this,s=i.ready().then(function(){for(var l=i._dbInfo,u=localStorage.length,f=[],y=0;y<u;y++){var w=localStorage.key(y);w.indexOf(l.keyPrefix)===0&&f.push(w.substring(l.keyPrefix.length))}return f});return S(s,n),s}function hn(n){var i=this,s=i.keys().then(function(l){return l.length});return S(s,n),s}function pn(n,i){var s=this;n=D(n);var l=s.ready().then(function(){var u=s._dbInfo;localStorage.removeItem(u.keyPrefix+n)});return S(l,i),l}function mn(n,i,s){var l=this;n=D(n);var u=l.ready().then(function(){i===void 0&&(i=null);var f=i;return new p(function(y,w){var A=l._dbInfo;A.serializer.serialize(i,function(O,R){if(R)w(R);else try{localStorage.setItem(A.keyPrefix+n,O),y(f)}catch(x){(x.name==="QuotaExceededError"||x.name==="NS_ERROR_DOM_QUOTA_REACHED")&&w(x),w(x)}})})});return S(u,s),u}function vn(n,i){if(i=M.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var s=this.config();n.name=n.name||s.name,n.storeName=n.storeName||s.storeName}var l=this,u;return n.name?u=new p(function(f){n.storeName?f(kt(n,l._defaultConfig)):f(n.name+"/")}).then(function(f){for(var y=localStorage.length-1;y>=0;y--){var w=localStorage.key(y);w.indexOf(f)===0&&localStorage.removeItem(w)}}):u=p.reject("Invalid arguments"),S(u,i),u}var _n={_driver:"localStorageWrapper",_initStorage:an,_support:nn(),iterate:ln,getItem:un,setItem:mn,removeItem:pn,clear:cn,length:hn,key:fn,keys:dn,dropInstance:vn},gn=function(n,i){return n===i||typeof n=="number"&&typeof i=="number"&&isNaN(n)&&isNaN(i)},yn=function(n,i){for(var s=n.length,l=0;l<s;){if(gn(n[l],i))return!0;l++}return!1},Ft=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},Te={},Bt={},Ie={INDEXEDDB:Fr,WEBSQL:rn,LOCALSTORAGE:_n},En=[Ie.INDEXEDDB._driver,Ie.WEBSQL._driver,Ie.LOCALSTORAGE._driver],ke=["dropInstance"],ct=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ke),bn={description:"",driver:En.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wn(n,i){n[i]=function(){var s=arguments;return n.ready().then(function(){return n[i].apply(n,s)})}}function ut(){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var s in i)i.hasOwnProperty(s)&&(Ft(i[s])?arguments[0][s]=i[s].slice():arguments[0][s]=i[s])}return arguments[0]}var In=function(){function n(i){E(this,n);for(var s in Ie)if(Ie.hasOwnProperty(s)){var l=Ie[s],u=l._driver;this[s]=u,Te[u]||this.defineDriver(l)}this._defaultConfig=ut({},bn),this._config=ut({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(i){if((typeof i>"u"?"undefined":c(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var s in i){if(s==="storeName"&&(i[s]=i[s].replace(/\W/g,"_")),s==="version"&&typeof i[s]!="number")return new Error("Database version must be a number.");this._config[s]=i[s]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},n.prototype.defineDriver=function(i,s,l){var u=new p(function(f,y){try{var w=i._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){y(A);return}for(var O=ct.concat("_initStorage"),R=0,x=O.length;R<x;R++){var H=O[R],V=!yn(ke,H);if((V||i[H])&&typeof i[H]!="function"){y(A);return}}var z=function(){for(var J=function(On){return function(){var An=new Error("Method "+On+" is not implemented by the current driver"),Gt=p.reject(An);return S(Gt,arguments[arguments.length-1]),Gt}},ue=0,lt=ke.length;ue<lt;ue++){var ft=ke[ue];i[ft]||(i[ft]=J(ft))}};z();var ee=function(J){Te[w]&&console.info("Redefining LocalForage driver: "+w),Te[w]=i,Bt[w]=J,f()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(ee,y):ee(!!i._support):ee(!0)}catch(J){y(J)}});return L(u,s,l),u},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(i,s,l){var u=Te[i]?p.resolve(Te[i]):p.reject(new Error("Driver not found."));return L(u,s,l),u},n.prototype.getSerializer=function(i){var s=p.resolve(at);return L(s,i),s},n.prototype.ready=function(i){var s=this,l=s._driverSet.then(function(){return s._ready===null&&(s._ready=s._initDriver()),s._ready});return L(l,i,i),l},n.prototype.setDriver=function(i,s,l){var u=this;Ft(i)||(i=[i]);var f=this._getSupportedDrivers(i);function y(){u._config.driver=u.driver()}function w(R){return u._extend(R),y(),u._ready=u._initStorage(u._config),u._ready}function A(R){return function(){var x=0;function H(){for(;x<R.length;){var V=R[x];return x++,u._dbInfo=null,u._ready=null,u.getDriver(V).then(w).catch(H)}y();var z=new Error("No available storage method found.");return u._driverSet=p.reject(z),u._driverSet}return H()}}var O=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=O.then(function(){var R=f[0];return u._dbInfo=null,u._ready=null,u.getDriver(R).then(function(x){u._driver=x._driver,y(),u._wrapLibraryMethodsWithReady(),u._initDriver=A(f)})}).catch(function(){y();var R=new Error("No available storage method found.");return u._driverSet=p.reject(R),u._driverSet}),L(this._driverSet,s,l),this._driverSet},n.prototype.supports=function(i){return!!Bt[i]},n.prototype._extend=function(i){ut(this,i)},n.prototype._getSupportedDrivers=function(i){for(var s=[],l=0,u=i.length;l<u;l++){var f=i[l];this.supports(f)&&s.push(f)}return s},n.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,s=ct.length;i<s;i++)wn(this,ct[i])},n.prototype.createInstance=function(i){return new n(i)},n}(),Rn=new In;o.exports=Rn},{3:3}]},{},[4])(4)})}),Di=Tr((e,t)=>{(function(r,o){typeof e=="object"&&typeof t<"u"?o(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],o):o(r.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(r){var o="localforage-driver-memory";function a(_){var I=typeof Symbol=="function"&&_[Symbol.iterator],T=0;return I?I.call(_):{next:function(){return _&&T>=_.length&&(_=void 0),{value:_&&_[T++],done:!_}}}}function c(_,I){_=_||[],I=I||{};try{return new Blob(_,I)}catch(G){if(G.name!=="TypeError")throw G;for(var T=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,P=new T,j=0;j<_.length;j+=1)P.append(_[j]);return P.getBlob(I.type)}}var E=/^~~local_forage_type~([^~]+)~/,h=9,v=h+4,m=Object.prototype.toString;function g(_){var I=_.length*.75,T=_.length;_[_.length-1]==="="&&(I--,_[_.length-2]==="="&&I--);for(var P=new ArrayBuffer(I),j=new Uint8Array(P),G=0,Y=0;G<T;G+=4){var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(_[G]),we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(_[G+1]),ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(_[G+2]),Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(_[G+3]);j[Y++]=ie<<2|we>>4,j[Y++]=(we&15)<<4|ge>>2,j[Y++]=(ge&3)<<6|Le&63}return P}function p(_){for(var I=new Uint8Array(_),T="",P=0;P<I.length;P+=3)T+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P]>>2],T+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P]&3)<<4|I[P+1]>>4],T+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P+1]&15)<<2|I[P+2]>>6],T+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P+2]&63];return I.length%3===2?T=T.substring(0,T.length-1)+"=":I.length%3===1&&(T=T.substring(0,T.length-2)+"=="),T}function S(_,I){var T="";if(_&&(T=m.call(_)),_&&(T==="[object ArrayBuffer]"||_.buffer&&m.call(_.buffer)==="[object ArrayBuffer]")){var P=void 0,j="__lfsc__:";_ instanceof ArrayBuffer?(P=_,j+="arbf"):(P=_.buffer,T==="[object Int8Array]"?j+="si08":T==="[object Uint8Array]"?j+="ui08":T==="[object Uint8ClampedArray]"?j+="uic8":T==="[object Int16Array]"?j+="si16":T==="[object Uint16Array]"?j+="ur16":T==="[object Int32Array]"?j+="si32":T==="[object Uint32Array]"?j+="ui32":T==="[object Float32Array]"?j+="fl32":T==="[object Float64Array]"?j+="fl64":I(new Error("Failed to get type for BinaryArray"))),I(j+p(P))}else if(T==="[object Blob]"){var G=new FileReader;G.onload=function(){var Y="~~local_forage_type~"+_.type+"~"+p(this.result);I("__lfsc__:blob"+Y)},G.readAsArrayBuffer(_)}else try{I(JSON.stringify(_))}catch(Y){console.error("Couldn't convert value into a JSON string: ",_),I(null,Y)}}function L(_){if(_.substring(0,h)!=="__lfsc__:")return JSON.parse(_);var I=_.substring(v),T=_.substring(h,v),P;if(T==="blob"&&E.test(I)){var j=I.match(E);P=j[1],I=I.substring(j[0].length)}var G=g(I);switch(T){case"arbf":return G;case"blob":return c([G],{type:P});case"si08":return new Int8Array(G);case"ui08":return new Uint8Array(G);case"uic8":return new Uint8ClampedArray(G);case"si16":return new Int16Array(G);case"ur16":return new Uint16Array(G);case"si32":return new Int32Array(G);case"ui32":return new Uint32Array(G);case"fl32":return new Float32Array(G);case"fl64":return new Float64Array(G);default:throw new Error("Unkown type: "+T)}}function D(_){var I,T;if(_===null||typeof _!="object"||"isActiveClone"in _)return _;var P=_ instanceof Date?new Date(_):_.constructor();try{for(var j=a(Object.keys(_)),G=j.next();!G.done;G=j.next()){var Y=G.value;Object.prototype.hasOwnProperty.call(_,Y)&&(_.isActiveClone=null,P[Y]=D(_[Y]),delete _.isActiveClone)}}catch(ie){I={error:ie}}finally{try{G&&!G.done&&(T=j.return)&&T.call(j)}finally{if(I)throw I.error}}return P}function M(_,I){return(_.name||I.name)+"/"+(_.storeName||I.storeName)+"/"}function d(_,I){I&&_.then(function(T){I(null,T)},function(T){I(T)})}function N(){for(var _=[],I=0;I<arguments.length;I++)_[I]=arguments[I];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function C(_,I){var T=this;if(I=N.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var P=this.config();_.name=_.name||P.name,_.storeName=_.storeName||P.storeName}var j;return _.name?j=new Promise(function(G){_.storeName?G(M(_,T._defaultConfig)):G(_.name+"/")}):j=Promise.reject("Invalid arguments"),{promise:j,callback:I}}function $(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}var B={bufferToString:p,deserialize:L,serialize:S,stringToBuffer:g},b={},F=function(){function _(I){this.kp=I,this.data={}}return _.resolve=function(I){return b[I]||(b[I]=new _(I)),b[I]},_.prototype.clear=function(){this.data={}},_.prototype.drop=function(){this.clear(),delete b[this.kp]},_.prototype.get=function(I){return this.data[I]},_.prototype.key=function(I){return this.keys()[I]},_.prototype.keys=function(){return Object.keys(this.data)},_.prototype.rm=function(I){delete this.data[I]},_.prototype.set=function(I,T){this.data[I]=T},_}();function U(_){var I=_?D(_):{},T=M(I,this._defaultConfig),P=F.resolve(T);return this._dbInfo=I,this._dbInfo.serializer=B,this._dbInfo.keyPrefix=T,this._dbInfo.mStore=P,Promise.resolve()}function k(_){var I=this,T=this.ready().then(function(){I._dbInfo.mStore.clear()});return d(T,_),T}function q(_,I){var T=C.apply(this,arguments),P=T.promise,j=T.callback,G=P.then(function(Y){F.resolve(Y).drop()});return d(G,j),P}function K(_,I){var T=this;_=$(_);var P=this.ready().then(function(){var j=T._dbInfo.mStore.get(_);return j==null?null:T._dbInfo.serializer.deserialize(j)});return d(P,I),P}function Z(_,I){var T=this,P=this.ready().then(function(){for(var j=T._dbInfo.mStore,G=j.keys(),Y=0;Y<G.length;Y++){var ie=j.get(G[Y]);if(ie&&(ie=T._dbInfo.serializer.deserialize(ie)),ie=_(ie,G[Y],Y+1),ie!==void 0)return ie}});return d(P,I),P}function oe(_,I){var T=this,P=this.ready().then(function(){var j;try{j=T._dbInfo.mStore.key(_),j===void 0&&(j=null)}catch{j=null}return j});return d(P,I),P}function ce(_){var I=this,T=this.ready().then(function(){return I._dbInfo.mStore.keys()});return d(T,_),T}function fe(_){var I=this.keys().then(function(T){return T.length});return d(I,_),I}function he(_,I){var T=this;_=$(_);var P=this.ready().then(function(){T._dbInfo.mStore.rm(_)});return d(P,I),P}function _e(_,I,T){var P=this;_=$(_);var j=this.ready().then(function(){I===void 0&&(I=null);var G=I;return new Promise(function(Y,ie){P._dbInfo.serializer.serialize(I,function(we,ge){if(ge)ie(ge);else try{P._dbInfo.mStore.set(_,we),Y(G)}catch(Le){ie(Le)}})})});return d(j,T),j}var le=!0;r._support=le,r._driver=o,r._initStorage=U,r.clear=k,r.dropInstance=q,r.getItem=K,r.iterate=Z,r.key=oe,r.keys=ce,r.length=fe,r.removeItem=he,r.setItem=_e,Object.defineProperty(r,"__esModule",{value:!0})})}),pt=Mr(Ci()),ir=Mr(Di()),Pi={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Ui(e){for(let[t,r]of Object.entries(Pi))e.style[t]=r}function xi(e){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(r=>r.src.includes(e))}var ji=class extends Ai{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(t=>{let r=()=>{if(xi(encodeURIComponent(this.parameters)))Wo().log();else{let o=document.createElement("iframe");o.classList.add("magic-iframe"),o.dataset.magicIframeLabel=Ze(this.endpoint).host,o.title="Secure Modal",o.src=Ze(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Ui(o),document.body.appendChild(o),t(o)}};["loaded","interactive","complete"].includes(document.readyState)?r():window.addEventListener("load",r,!1)}),window.addEventListener("message",t=>{var r;if(t.origin===this.endpoint&&t.data&&t.data.msgType&&this.messageHandlers.size){t.data.response=(r=t.data.response)!=null?r:{};for(let o of this.messageHandlers.values())o(t)}})}showOverlay(){return Xe(this,null,function*(){let t=yield this.iframe;t.style.display="block",this.activeElement=document.activeElement,t.focus()})}hideOverlay(){return Xe(this,null,function*(){var t;let r=yield this.iframe;r.style.display="none",(t=this.activeElement)!=null&&t.focus&&this.activeElement.focus(),this.activeElement=null})}_post(t){return Xe(this,null,function*(){let r=yield this.iframe;if(r&&r.contentWindow)r.contentWindow.postMessage(t,this.endpoint);else throw ko()})}},ki=Uo(Nr,{platform:"web",sdkName:"magic-sdk",version:"13.6.2",defaultEndpoint:"https://auth.magic.link/",ViewController:ji,configureStorage:()=>Xe(void 0,null,function*(){let e=pt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(ir),yield e.setDriver([pt.default.INDEXEDDB,pt.default.LOCALSTORAGE,ir._driver]),e})}),Fi=Object.create,$r=Object.defineProperty,Bi=Object.getOwnPropertyDescriptor,Gi=Object.getOwnPropertyNames,Hi=Object.getPrototypeOf,Wi=Object.prototype.hasOwnProperty,It=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qi=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Gi(t))!Wi.call(e,a)&&a!==r&&$r(e,a,{get:()=>t[a],enumerable:!(o=Bi(t,a))||o.enumerable});return e},Cr=(e,t,r)=>(r=e!=null?Fi(Hi(e)):{},qi(t||!e||!e.__esModule?$r(r,"default",{value:e,enumerable:!0}):r,e)),xe=(e,t,r)=>new Promise((o,a)=>{var c=v=>{try{h(r.next(v))}catch(m){a(m)}},E=v=>{try{h(r.throw(v))}catch(m){a(m)}},h=v=>v.done?o(v.value):Promise.resolve(v.value).then(c,E);h((r=r.apply(e,t)).next())}),Dr=It((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o():typeof define=="function"&&define.amd?define([],o):r.CryptoJS=o()})(e,function(){var r=r||function(o,a){var c=Object.create||function(){function d(){}return function(N){var C;return d.prototype=N,C=new d,d.prototype=null,C}}(),E={},h=E.lib={},v=h.Base=function(){return{extend:function(d){var N=c(this);return d&&N.mixIn(d),(!N.hasOwnProperty("init")||this.init===N.init)&&(N.init=function(){N.$super.init.apply(this,arguments)}),N.init.prototype=N,N.$super=this,N},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var N in d)d.hasOwnProperty(N)&&(this[N]=d[N]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),m=h.WordArray=v.extend({init:function(d,N){d=this.words=d||[],N!=a?this.sigBytes=N:this.sigBytes=d.length*4},toString:function(d){return(d||p).stringify(this)},concat:function(d){var N=this.words,C=d.words,$=this.sigBytes,B=d.sigBytes;if(this.clamp(),$%4)for(var b=0;b<B;b++){var F=C[b>>>2]>>>24-b%4*8&255;N[$+b>>>2]|=F<<24-($+b)%4*8}else for(var b=0;b<B;b+=4)N[$+b>>>2]=C[b>>>2];return this.sigBytes+=B,this},clamp:function(){var d=this.words,N=this.sigBytes;d[N>>>2]&=4294967295<<32-N%4*8,d.length=o.ceil(N/4)},clone:function(){var d=v.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var N=[],C=function(U){var U=U,k=987654321,q=4294967295;return function(){k=36969*(k&65535)+(k>>16)&q,U=18e3*(U&65535)+(U>>16)&q;var K=(k<<16)+U&q;return K/=4294967296,K+=.5,K*(o.random()>.5?1:-1)}},$=0,B;$<d;$+=4){var b=C((B||o.random())*4294967296);B=b()*987654071,N.push(b()*4294967296|0)}return new m.init(N,d)}}),g=E.enc={},p=g.Hex={stringify:function(d){for(var N=d.words,C=d.sigBytes,$=[],B=0;B<C;B++){var b=N[B>>>2]>>>24-B%4*8&255;$.push((b>>>4).toString(16)),$.push((b&15).toString(16))}return $.join("")},parse:function(d){for(var N=d.length,C=[],$=0;$<N;$+=2)C[$>>>3]|=parseInt(d.substr($,2),16)<<24-$%8*4;return new m.init(C,N/2)}},S=g.Latin1={stringify:function(d){for(var N=d.words,C=d.sigBytes,$=[],B=0;B<C;B++){var b=N[B>>>2]>>>24-B%4*8&255;$.push(String.fromCharCode(b))}return $.join("")},parse:function(d){for(var N=d.length,C=[],$=0;$<N;$++)C[$>>>2]|=(d.charCodeAt($)&255)<<24-$%4*8;return new m.init(C,N)}},L=g.Utf8={stringify:function(d){try{return decodeURIComponent(escape(S.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return S.parse(unescape(encodeURIComponent(d)))}},D=h.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=L.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var N=this._data,C=N.words,$=N.sigBytes,B=this.blockSize,b=B*4,F=$/b;d?F=o.ceil(F):F=o.max((F|0)-this._minBufferSize,0);var U=F*B,k=o.min(U*4,$);if(U){for(var q=0;q<U;q+=B)this._doProcessBlock(C,q);var K=C.splice(0,U);N.sigBytes-=k}return new m.init(K,k)},clone:function(){var d=v.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});h.Hasher=D.extend({cfg:v.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){D.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var N=this._doFinalize();return N},blockSize:16,_createHelper:function(d){return function(N,C){return new d.init(C).finalize(N)}},_createHmacHelper:function(d){return function(N,C){return new M.HMAC.init(d,C).finalize(N)}}});var M=E.algo={};return E}(Math);return r})}),zi=It((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o(Dr()):typeof define=="function"&&define.amd?define(["./core"],o):o(r.CryptoJS)})(e,function(r){return function(o){var a=r,c=a.lib,E=c.WordArray,h=c.Hasher,v=a.algo,m=[],g=[];(function(){function L(N){for(var C=o.sqrt(N),$=2;$<=C;$++)if(!(N%$))return!1;return!0}function D(N){return(N-(N|0))*4294967296|0}for(var M=2,d=0;d<64;)L(M)&&(d<8&&(m[d]=D(o.pow(M,1/2))),g[d]=D(o.pow(M,1/3)),d++),M++})();var p=[],S=v.SHA256=h.extend({_doReset:function(){this._hash=new E.init(m.slice(0))},_doProcessBlock:function(L,D){for(var M=this._hash.words,d=M[0],N=M[1],C=M[2],$=M[3],B=M[4],b=M[5],F=M[6],U=M[7],k=0;k<64;k++){if(k<16)p[k]=L[D+k]|0;else{var q=p[k-15],K=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,Z=p[k-2],oe=(Z<<15|Z>>>17)^(Z<<13|Z>>>19)^Z>>>10;p[k]=K+p[k-7]+oe+p[k-16]}var ce=B&b^~B&F,fe=d&N^d&C^N&C,he=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),_e=(B<<26|B>>>6)^(B<<21|B>>>11)^(B<<7|B>>>25),le=U+_e+ce+g[k]+p[k],_=he+fe;U=F,F=b,b=B,B=$+le|0,$=C,C=N,N=d,d=le+_|0}M[0]=M[0]+d|0,M[1]=M[1]+N|0,M[2]=M[2]+C|0,M[3]=M[3]+$|0,M[4]=M[4]+B|0,M[5]=M[5]+b|0,M[6]=M[6]+F|0,M[7]=M[7]+U|0},_doFinalize:function(){var L=this._data,D=L.words,M=this._nDataBytes*8,d=L.sigBytes*8;return D[d>>>5]|=128<<24-d%32,D[(d+64>>>9<<4)+14]=o.floor(M/4294967296),D[(d+64>>>9<<4)+15]=M,L.sigBytes=D.length*4,this._process(),this._hash},clone:function(){var L=h.clone.call(this);return L._hash=this._hash.clone(),L}});a.SHA256=h._createHelper(S),a.HmacSHA256=h._createHmacHelper(S)}(Math),r.SHA256})}),Xi=It((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o(Dr()):typeof define=="function"&&define.amd?define(["./core"],o):o(r.CryptoJS)})(e,function(r){return function(){var o=r,a=o.lib,c=a.WordArray,E=o.enc;E.Base64={stringify:function(v){var m=v.words,g=v.sigBytes,p=this._map;v.clamp();for(var S=[],L=0;L<g;L+=3)for(var D=m[L>>>2]>>>24-L%4*8&255,M=m[L+1>>>2]>>>24-(L+1)%4*8&255,d=m[L+2>>>2]>>>24-(L+2)%4*8&255,N=D<<16|M<<8|d,C=0;C<4&&L+C*.75<g;C++)S.push(p.charAt(N>>>6*(3-C)&63));var $=p.charAt(64);if($)for(;S.length%4;)S.push($);return S.join("")},parse:function(v){var m=v.length,g=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var S=0;S<g.length;S++)p[g.charCodeAt(S)]=S}var L=g.charAt(64);if(L){var D=v.indexOf(L);D!==-1&&(m=D)}return h(v,m,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function h(v,m,g){for(var p=[],S=0,L=0;L<m;L++)if(L%4){var D=g[v.charCodeAt(L-1)]<<L%4*2,M=g[v.charCodeAt(L)]>>>6-L%4*2;p[S>>>2]|=(D|M)<<24-S%4*8,S++}return c.create(p,S)}}(),r.enc.Base64})}),Vi=(e=>(e.ParseRedirectResult="magic_oauth_parse_redirect_result",e))(Vi||{}),Ki=(e=>(e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidScope="invalid_scope",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedResponseType="unsupported_response_type",e.UnsupportedGrantType="unsupported_grant_type",e.UnsupportedTokenType="unsupported_token_type",e.AccessDenied="access_denied",e.ServerError="server_error",e.TemporarilyUnavailable="temporarily_unavailable",e))(Ki||{}),Yi=Cr(zi()),Ji=Cr(Xi()),sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",Pr=typeof window<"u"&&!!window.crypto,Qi=Pr&&!!window.crypto.subtle;function Zi(e){return Array.from(e).map(t=>sr[t%sr.length]).join("")}function ar(e){let t=r=>r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");if(e instanceof ArrayBuffer){let r=new Uint8Array(e),o=Array.from(r).map(c=>String.fromCharCode(c)).join(""),a=btoa(o);return t(a)}return t(Ji.default.stringify(e))}function es(e){return xe(this,null,function*(){if(Qi){let t=new TextEncoder().encode(e);return crypto.subtle.digest("SHA-256",t).then(ar)}return ar((0,Yi.default)(e))})}function cr(e){let t=new Uint8Array(e);if(Pr)window.crypto.getRandomValues(t);else for(let r=0;r<e;r+=1)t[r]=Math.floor(Math.random()*Math.floor(255));return Zi(t)}function ts(){return xe(this,null,function*(){let e=cr(128),t=cr(128),r=yield es(t);return{verifier:t,challenge:r,state:e}})}var rs=class extends Se.Internal{constructor(){super(...arguments),this.name="oauth",this.config={},this.compat={"magic-sdk":">=2.4.6","@magic-sdk/react-native":!1,"@magic-sdk/react-native-bare":!1,"@magic-sdk/react-native-expo":!1}}loginWithRedirect(e){return this.utils.createPromiEvent(t=>xe(this,null,function*(){let{provider:r,query:o}=yield ns.call(this,e);window.location.href=new URL(`/v1/oauth2/${r}/start?${o}`,this.sdk.endpoint).href,t()}))}getRedirectResult(){let e=window.location.search,t=window.location.origin+window.location.pathname;return window.history.replaceState(null,"",t),os.call(this,e)}},et="oauth_redirect_metadata";function ns(e){return xe(this,null,function*(){yield this.utils.storage.removeItem(et);let{provider:t,redirectURI:r,scope:o,loginHint:a}=e,{verifier:c,challenge:E,state:h}=yield ts(),v=JSON.stringify({verifier:c,state:h});return yield this.utils.storage.setItem(et,v),{query:[`magic_api_key=${encodeURIComponent(this.sdk.apiKey)}`,`magic_challenge=${encodeURIComponent(E)}`,`state=${encodeURIComponent(h)}`,`platform=${encodeURIComponent("web")}`,o&&`scope=${encodeURIComponent(o.join(" "))}`,r&&`redirect_uri=${encodeURIComponent(r)}`,a&&`login_hint=${encodeURIComponent(a)}`].reduce((m,g)=>g?`${m}&${g}`:m),provider:t,redirectURI:r}})}function os(e){return this.utils.createPromiEvent((t,r)=>xe(this,null,function*(){var o;let a=yield this.utils.storage.getItem(et),{verifier:c,state:E}=JSON.parse(a);this.utils.storage.removeItem(et);let h=this.utils.createJsonRpcRequestPayload("magic_oauth_parse_redirect_result",[e,c,E]),v=yield this.request(h),m=v,g=v;g.error&&r(this.createError(g.error,(o=g.error_description)!=null?o:"An error occurred.",{errorURI:g.error_uri,provider:g.provider})),t(m)}))}const is=!1;class ss extends Sn{constructor(t){super(t),dt(this,"id","magic-link"),dt(this,"name","Magic Link"),dt(this,"ready",!is),this.magicOptions=t.options}async getAccount(){const o=await new Ht(await this.getProvider()).getSigner().getAddress();return o.startsWith("0x")?o:`0x${o}`}async getProvider(){if(this.provider)return this.provider;const t=this.getMagicSDK();return this.provider=t.rpcProvider,this.provider}async getSigner(){return await new Ht(await this.getProvider()).getSigner()}async isAuthorized(){const t=this.getMagicSDK();try{return await t.user.isLoggedIn()}catch{return!1}}onAccountsChanged(t){t.length===0?this.emit("disconnect"):t[0]&&this.emit("change",{account:Nn(t[0])})}onChainChanged(t){const r=ur(t),o=this.isChainUnsupported(r);this.emit("change",{chain:{id:r,unsupported:o}})}onDisconnect(){this.emit("disconnect")}async disconnect(){await this.getMagicSDK().user.logout()}}class gs extends ss{constructor(t){var r,o;super(t),this.magicSdkConfiguration=t.options.magicSdkConfiguration,this._type=t.options.type,this.oauthProviders=((r=t.options.oauthOptions)==null?void 0:r.providers)||[],this.oauthRedirectURI=(o=t.options.oauthOptions)==null?void 0:o.redirectURI}async connect(t){if(!this.magicOptions.apiKey)throw new Error("Magic API Key is not provided.");try{t.chainId&&this.initializeMagicSDK({chainId:t.chainId});const r=await this.getProvider();this.setupListeners(),this.emit("message",{type:"connecting"});const o=await this.isAuthorized();let a;try{a=await this.getChainId()}catch{a=0}if(this._connectedChainId=a,o)return{provider:r,chain:{id:a,unsupported:!1},account:await this.getAccount()};const c=this.getMagicSDK();if(this._type==="connect")("email"in t||"phoneNumber"in t)&&console.warn("Passing email or phoneNumber is not required for Magic Connect"),await c.wallet.connectWithUI();else if("oauthProvider"in t)await c.oauth.loginWithRedirect({provider:t.oauthProvider,redirectURI:this.oauthRedirectURI||window.location.href}),await new Promise(v=>{setTimeout(v,1e4)});else if("email"in t)await c.auth.loginWithMagicLink({email:t.email,showUI:!0});else if("phoneNumber"in t)await c.auth.loginWithSMS({phoneNumber:t.phoneNumber});else throw new Error("Invalid options: Either provide and email, phoneNumber or oauthProvider when using Magic Auth");let h=await(await this.getSigner()).getAddress();return h.startsWith("0x")||(h=`0x${h}`),{account:h,chain:{id:a,unsupported:!1},provider:r}}catch(r){throw console.error(r),new Error("Something went wrong")}}async getChainId(){var r;const t=(r=this.magicSdkConfiguration)==null?void 0:r.network;if(typeof t=="object"){const o=t.chainId;if(o)return ur(o)}throw new Error("Chain ID is not defined")}initializeMagicSDK(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={...this.magicSdkConfiguration,extensions:[new rs]};if(t){const o=this.chains.find(a=>a.chainId===t);o&&(r.network={rpcUrl:o.rpc[0]||"",chainId:o.chainId})}return this.magicSDK=new ki(this.magicOptions.apiKey,r),this.provider=this.magicSDK.rpcProvider,this.magicSDK}getMagicSDK(){return this.magicSDK?this.magicSDK:this.initializeMagicSDK()}async setupListeners(){const t=await this.getProvider();t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)}async switchChain(t){const r=this.chains.find(o=>o.chainId===t);if(!r)throw new Error("Chain not found");return this._connectedChainId!==t&&this.initializeMagicSDK({chainId:t}),r}}export{gs as MagicAuthConnector,ss as MagicBaseConnector};
